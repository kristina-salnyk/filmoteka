var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var r=n("oxp97"),s=n("3ILHO"),o=(r=n("oxp97"),s=n("3ILHO"),n("3v5re")),l=n("8G1wF"),i=(r=n("oxp97"),n("2Dfe2")),d=n("4dtAK"),c=n("8LAK9");const f=async()=>{const e={params:{query:r.siteConfigs.searchQuery,page:r.siteConfigs.page,include_adult:r.siteConfigs.includeAdult}},t=l.REQUEST_URL.SEARCH;try{const a=await o.default.get(t,e);return d.default.save(c.default.LAST_FETCH,"SEARCH"),a.data}catch(e){i.default.failedRequest()}};r=n("oxp97"),s=n("3ILHO");var u=n("2nhTy");const p=e=>{const{results:t,total_pages:a,total_results:n}=e;if(0===n)return void(s.default.searchError.style.display="block");(0,u.default)(a,r.siteConfigs.page);const o=t.map((e=>{const t={...e};t.genres=e.genre_ids.map((e=>r.siteConfigs.getGenreById(e))).join(", ");const a=new Date(e.release_date);return t.year=a.getFullYear(),t.vote=e.vote_average.toFixed(1),t}));C.appendGalleryMarkup(o)};var y=n("04jNI");const g=async e=>{e.preventDefault(),s.default.searchError.style.display="none";const t=e.currentTarget.elements.searchQuery.value.trim();if(t){r.siteConfigs.setSearchQuery(t);try{y.spinner.spin(s.default.homeGallery);const e=await f();y.spinner.stop(),p(e)}catch(e){s.default.searchError.style.display="block"}}else s.default.searchError.style.display="block"};var m=n("ag3f1"),v=n("cJ4l5");i=n("2Dfe2"),y=n("04jNI"),s=n("3ILHO");const E=async e=>{e.preventDefault();const t=e.target.closest("a").dataset.id;try{y.spinner.spin(s.default.homeGallery);const e=await(0,m.fetchMovieById)(t);y.spinner.stop(),(0,v.renderOneMovieData)(e,C.appendMovieMarkup)}catch(e){i.default.failedRequest()}};var h=n("hBEsZ"),L=n("9TiW2"),T=n("2gAtb"),R=n("b986f"),w=n("ksVbb"),b=n("9TOT1"),k=n("bZJOo");var C={setHomeEventListeners:()=>{s.default.searchForm.addEventListener("submit",g),s.default.homeGallery.addEventListener("click",E),s.default.goTopBtn.addEventListener("click",L.backToTop),window.addEventListener("scroll",L.trackScroll),s.default.registerForm.addEventListener("submit",w.submitRegisterForm)},appendGalleryMarkup:e=>{s.default.homeGallery.innerHTML=(0,T.default)(e)},appendMovieMarkup:e=>{(0,h.dynamicRefs)().movieData.innerHTML=(0,R.default)(e),(0,h.dynamicRefs)().watchedBtn.addEventListener("click",b.modalWatchedBtnClickHandler),(0,h.dynamicRefs)().queueBtn.addEventListener("click",b.modalQueueBtnClickHandler),(0,b.onOpenModal)(e.id),(0,h.dynamicRefs)().playTrailer.addEventListener("click",k.httpsYouTubeVideo)},scrollToUp:()=>{window.scrollBy(0,0)}};i=n("2Dfe2");n("ksVbb");o=n("3v5re"),l=n("8G1wF"),i=n("2Dfe2");const H=async()=>{const e=`${l.REQUEST_URL.GENRES}`;try{return(await o.default.get(e)).data}catch(e){i.default.failedRequest()}};o=n("3v5re"),l=n("8G1wF"),r=n("oxp97"),i=n("2Dfe2"),d=n("4dtAK"),c=n("8LAK9");const M=async()=>{const e={params:{page:r.siteConfigs.page}},t=`${l.REQUEST_URL.TRENDING}/${r.siteConfigs.mediaType}/${r.siteConfigs.timeWindow}`;try{const a=await o.default.get(t,e);return d.default.save(c.default.LAST_FETCH,"TRENDING"),a.data}catch(e){i.default.failedRequest()}};(()=>{const e={openModalBtn:document.querySelector("[data-footer-modal-open]"),closeModalBtn:document.querySelector("[data-footer-modal-close]"),footerModal:document.querySelector("[data-modal]")};function t(){document.body.classList.toggle("modal-open"),e.footerModal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})(),n("hEnct");s=n("3ILHO"),r=n("oxp97"),h=n("hBEsZ"),i=n("2Dfe2"),d=n("4dtAK"),c=n("8LAK9"),y=n("04jNI");async function G(){if("TRENDING"===d.default.load(c.default.LAST_FETCH))try{y.spinner.spin(s.default.homeGallery);const e=await M();y.spinner.stop(),p(e)}catch(e){i.default.failedRequest()}if("SEARCH"===d.default.load(c.default.LAST_FETCH))try{y.spinner.spin(s.default.homeGallery);const e=await f();y.spinner.stop(),p(e)}catch(e){i.default.failedRequest()}}(0,h.dynamicRefs)().paginList.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;if("0"!==e.target.dataset.number){const t=Number(e.target.dataset.number);r.siteConfigs.page=t,s.default.homeGallery.innerHTML="",G()}})),(0,h.dynamicRefs)().rightArrow.addEventListener("click",(function(){r.siteConfigs.incrementPage(),s.default.homeGallery.innerHTML="",G()})),(0,h.dynamicRefs)().leftArrow.addEventListener("click",(function(){r.siteConfigs.decrementPage(),s.default.homeGallery.innerHTML="",G()}));y=n("04jNI"),s=n("3ILHO");(async function(){C.setHomeEventListeners();try{y.spinner.spin(s.default.homeGallery);const e=await H(),{genres:t}=e;r.siteConfigs.genres=t;const a=await M();y.spinner.stop(),p(a)}catch(e){i.default.failedRequest()}})().catch((e=>{i.default.failedRequest()}));
//# sourceMappingURL=index.814878be.js.map
