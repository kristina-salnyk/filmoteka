{"mappings":"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","sources":["src/index.js","src/js/ui/home-page-ui.js","src/js/api/movie-api/fetchSearchMovie.js","src/js/render/renderMoviesData.js","src/js/handlers/searchFormSubmitHandler.js","src/js/handlers/homeGalleryClickHandler.js","src/js/handlers/scrollUpClickHandler.js","src/js/api/movie-api/fetchGenresList.js","src/js/api/movie-api/fetchTrendingMovies.js","src/js/footer-modal.js","src/js/loadPagePagination.js"],"sourcesContent":["import MovieConfigs from './js/MovieConfigs';\nimport homePageUi from './js/ui/home-page-ui';\nimport notifications from './js/notifications';\nimport { fetchGenresList } from './js/api/movie-api/fetchGenresList';\nimport { fetchTrendingMovies } from './js/api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './js/render/renderMoviesData';\nimport './js/footer-modal';\nimport './js/registration-modal';\nimport './js/loadPagePagination';\nimport { spinner } from './js/spinner';\nimport refs from './js/refs/refs';\n\nexport const movieConfigs = new MovieConfigs();\n\ninitHomePage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initHomePage() {\n  homePageUi.setHomeEventListeners();\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const genresData = await fetchGenresList();\n    const { genres } = genresData;\n    movieConfigs.genres = genres;\n\n    const trendingData = await fetchTrendingMovies();\n    spinner.stop();\n    renderMoviesData(trendingData);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n}\n","import refs from '../refs/refs';\nimport { searchFormSubmitHandler } from '../handlers/searchFormSubmitHandler';\nimport { homeGalleryClickHandler } from '../handlers/homeGalleryClickHandler';\nimport { dynamicRefs } from '../refs/dynamicRefs';\nimport { trackScroll, backToTop } from '../handlers/scrollUpClickHandler';\nimport movieCards from '../../templates/movie-card.hbs';\nimport modalMovie from '../../templates/modal-for-movie.hbs';\nimport {\n  modalWatchedBtnClickHandler,\n  modalQueueBtnClickHandler,\n  onOpenModal,\n} from '../handlers/modalBtnsClickHandler';\nimport { httpsYouTubeVideo } from '../you-tube';\n\nconst setHomeEventListeners = () => {\n  refs.searchForm.addEventListener('submit', searchFormSubmitHandler);\n  refs.homeGallery.addEventListener('click', homeGalleryClickHandler);\n\n  refs.goTopBtn.addEventListener('click', backToTop);\n  window.addEventListener('scroll', trackScroll);\n};\n\nconst appendGalleryMarkup = movies => {\n  refs.homeGallery.innerHTML = movieCards(movies);\n};\n\nconst appendMovieMarkup = movie => {\n  dynamicRefs().movieData.innerHTML = modalMovie(movie);\n\n  dynamicRefs().watchedBtn.addEventListener(\n    'click',\n    modalWatchedBtnClickHandler\n  );\n  dynamicRefs().queueBtn.addEventListener('click', modalQueueBtnClickHandler);\n  onOpenModal(movie.id);\n  dynamicRefs().playTrailer.addEventListener('click', httpsYouTubeVideo);\n};\n\nconst scrollToUp = () => {\n  window.scrollBy(0, 0);\n};\n\nexport default {\n  setHomeEventListeners,\n  appendGalleryMarkup,\n  appendMovieMarkup,\n  scrollToUp,\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { movieConfigs } from '../../../index';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchSearchMovie = async () => {\n  const config = {\n    params: {\n      query: movieConfigs.searchQuery,\n      page: movieConfigs.page,\n      include_adult: movieConfigs.includeAdult,\n    },\n  };\n\n  const url = REQUEST_URL.SEARCH;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'SEARCH');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import { movieConfigs } from '../../index';\nimport refs from '../refs/refs';\nimport homePageUi from '../ui/home-page-ui';\nimport paginationMarkup from '../pagination';\n\nexport const renderMoviesData = data => {\n  const {\n    results: movies,\n    total_pages: totalPages,\n    total_results: totalResults,\n  } = data;\n\n  if (totalResults === 0) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  paginationMarkup(totalPages, movieConfigs.page);\n\n  const moviesData = movies.map(item => {\n    const newItem = { ...item };\n    newItem.genres = item['genre_ids']\n      .map(id => movieConfigs.getGenreById(id))\n      .join(', ');\n    const releaseDate = new Date(item['release_date']);\n    newItem.year = releaseDate.getFullYear();\n    newItem.vote = item['vote_average'].toFixed(1);\n    return newItem;\n  });\n\n  homePageUi.appendGalleryMarkup(moviesData);\n};\n","import { movieConfigs } from '../../index';\nimport refs from '../refs/refs';\nimport { fetchSearchMovie } from '../api/movie-api/fetchSearchMovie';\nimport { renderMoviesData } from '../render/renderMoviesData';\nimport { spinner } from '../spinner';\n\nexport const searchFormSubmitHandler = async event => {\n  event.preventDefault();\n\n  refs.searchError.style.display = 'none';\n\n  const searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  movieConfigs.setSearchQuery(searchQuery);\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const searchData = await fetchSearchMovie();\n    spinner.stop();\n    renderMoviesData(searchData);\n  } catch (error) {\n    refs.searchError.style.display = 'block';\n  }\n};\n","import { fetchMovieById } from '../api/movie-api/fetchMovieById';\nimport { renderOneMovieData } from '../render/renderOneMovieData';\nimport notifications from '../notifications';\nimport homePageUi from '../ui/home-page-ui';\nimport { spinner } from '../spinner';\nimport refs from '../refs/refs';\n\nexport const homeGalleryClickHandler = async event => {\n  event.preventDefault();\n\n  const movieId = event.target.closest('a').dataset.id;\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const movieData = await fetchMovieById(movieId);\n    spinner.stop();\n    renderOneMovieData(movieData, homePageUi.appendMovieMarkup);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import refs from '../refs/refs';\n\nexport const trackScroll = () => {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    refs.goTopBtn.classList.add('back-to-top_show');\n  }\n  if (scrolled < coords) {\n    refs.goTopBtn.classList.remove('back-to-top_show');\n  }\n};\n\nexport const backToTop = () => {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport notifications from '../../notifications';\n\nexport const fetchGenresList = async () => {\n  const url = `${REQUEST_URL.GENRES}`;\n\n  try {\n    const response = await api.get(url);\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { movieConfigs } from '../../../index';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchTrendingMovies = async () => {\n  const config = {\n    params: {\n      page: movieConfigs.page,\n    },\n  };\n\n  const url = `${REQUEST_URL.TRENDING}/${movieConfigs.mediaType}/${movieConfigs.timeWindow}`;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'TRENDING');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","(() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-footer-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-footer-modal-close]\"),\n    footerModal: document.querySelector(\"[data-modal]\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    document.body.classList.toggle(\"modal-open\");\n    refs.footerModal.classList.toggle(\"is-hidden\");\n  }\n})();","import refs from './refs/refs';\nimport { movieConfigs } from '../index';\nimport { dynamicRefs } from './refs/dynamicRefs';\nimport { fetchTrendingMovies } from './api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './render/renderMoviesData';\nimport { fetchSearchMovie } from './api/movie-api/fetchSearchMovie';\nimport notifications from './notifications';\nimport storege from './local-storage/local-storage-service';\nimport key from './local-storage/local-storage-keys';\nimport { spinner } from './spinner';\n\ndynamicRefs().paginList.addEventListener('click', getNewPage);\ndynamicRefs().rightArrow.addEventListener('click', rightBtnClick);\ndynamicRefs().leftArrow.addEventListener('click', leftBtnClick);\n\nfunction leftBtnClick() {\n  movieConfigs.decrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction rightBtnClick() {\n  movieConfigs.incrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction getNewPage(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.dataset.number !== '0') {\n    const page = Number(e.target.dataset.number);\n    movieConfigs.page = page;\n    refs.homeGallery.innerHTML = '';\n    loadMovies();\n  }\n}\n\nasync function loadMovies() {\n  if (storege.load(key.LAST_FETCH) === 'TRENDING') {\n    try {\n      spinner.spin(refs.homeGallery);\n      const trendingData = await fetchTrendingMovies();\n      spinner.stop();\n      renderMoviesData(trendingData);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n\n  if (storege.load(key.LAST_FETCH) === 'SEARCH') {\n    try {\n      spinner.spin(refs.homeGallery);\n      const data = await fetchSearchMovie();\n      spinner.stop();\n      renderMoviesData(data);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n}\n"],"names":["$53vTJ","parcelRequire","$3ILHO","$3v5re","$352b644390f83377$export$b7b604fc4e6868b3","async","config","params","query","$1f0dc3b9307be026$export$c22099b47caf822","searchQuery","page","include_adult","includeAdult","url","$8G1wF","REQUEST_URL","SEARCH","response","default","get","$4dtAK","save","$8LAK9","LAST_FETCH","data","error","$2Dfe2","failedRequest","$be825a0409221113$export$f7f786f89bc6ea16","results","movies","total_pages","totalPages","total_results","totalResults","searchError","style","display","$2nhTy","moviesData","map","item","newItem","genres","id","getGenreById","join","releaseDate","Date","year","getFullYear","vote","toFixed","$4a3ee2f3834c54fc$export$2e2bcd8739ae039","appendGalleryMarkup","$515f53deba1868d3$export$4e08842eeca88a89","event","preventDefault","currentTarget","elements","value","trim","setSearchQuery","$04jNI","spinner","spin","homeGallery","searchData","stop","$ag3f1","$bdd48e428274a982$export$4b0a611b144735ad","movieId","target","closest","dataset","movieData","fetchMovieById","$cJ4l5","renderOneMovieData","appendMovieMarkup","$7337f03e4a1be971$export$de1563ff5a1bae99","scrolled","window","pageYOffset","coords","document","documentElement","clientHeight","goTopBtn","classList","add","remove","$7337f03e4a1be971$export$7df07f18f1d2d847","scrollTo","top","behavior","searchForm","addEventListener","innerHTML","$2gAtb","movie","$hBEsZ","dynamicRefs","$b986f","watchedBtn","$9TOT1","modalWatchedBtnClickHandler","queueBtn","modalQueueBtnClickHandler","onOpenModal","playTrailer","$bZJOo","httpsYouTubeVideo","scrollBy","$da7107c2aff43685$export$d60bdeaf43923027","GENRES","$ee7378697008c5bd$export$a2840eca364d9ff2","TRENDING","mediaType","timeWindow","refs","openModalBtn","querySelector","closeModalBtn","footerModal","toggleModal","body","toggle","$732150c576c7596a$var$loadMovies","load","trendingData","error1","paginList","e","nodeName","number","Number","rightArrow","incrementPage","leftArrow","decrementPage","setHomeEventListeners","genresData","$1f0dc3b9307be026$var$initHomePage","catch"],"version":3,"file":"index.839ef7df.js.map"}