{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,+MAkBA,EAAAC,EAAAC,oBAAmBC,EAAAC,MAAMC,IACnBF,EAAAC,KAAKE,YACPC,EAAAC,QAAKC,oBAAoBC,YAAc,UAEvCH,EAAAC,QAAKC,oBAAoBC,YAAc,SAGK,UAA1CC,EAAAH,QAAQI,KAAKC,EAAAC,aAAaC,cAC5B,EAAAC,EAAAC,wBAAuBC,OAAMC,IAC3BC,EAAAZ,QAAca,eACd,KAGJ,EAAAC,EAAAC,0BAAyBL,OAAMC,IAC7BC,EAAAZ,QAAca,eAAe,GAC7B,IAOJG,iBACEb,EAAAH,QAAQiB,KAAKZ,EAAAC,aAAaC,WAAY,WAEtChB,EAAAS,QAAckB,2BAEdC,EAAAC,QAAQC,KAAKtB,EAAAC,QAAKsB,gBAClBC,YAAW,KACJ5B,EAAAC,KAAKE,cACR,EAAAgB,EAAAC,0BAAyBL,OAAMC,IAC7BC,EAAAZ,QAAca,eAAe,IAEjCM,EAAAC,QAAQI,MAAM,GACb,K,CAhBLC,GAAkBf,OAAMC,IACtBC,EAAAZ,QAAca,eAAe","sources":["src/library.js"],"sourcesContent":["import libraryPageUi from './js/ui/library-page-ui';\nimport notifications from './js/notifications';\nimport './js/api/firebase/fire-base-service';\nimport './js/registration-modal';\nimport './js/load-page-pagination';\nimport './js/footer-modal';\nimport './js/swiper-slider';\nimport './js/theme';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport refs from './js/refs/refs';\nimport { watchedTabClickHandler } from './js/handlers/watchedTabClickHandler';\nimport { auth } from './js/api/firebase/fire-base-service';\nimport storage from './js/local-storage-service';\nimport { STORAGE_KEYS } from './js/constants';\nimport { queueTabClickHandler } from './js/handlers/queueTabClickHandler';\nimport { siteConfigs } from './js/SiteConfigs';\nimport { spinner } from './js/spinner';\n\nonAuthStateChanged(auth, user => {\n  if (auth.currentUser) {\n    refs.openRegistrationBtn.textContent = 'Log out';\n  } else {\n    refs.openRegistrationBtn.textContent = 'Log in';\n  }\n\n  if (storage.load(STORAGE_KEYS.LAST_FETCH) === 'QUEUE')\n    queueTabClickHandler().catch(error => {\n      notifications.failedRequest();\n      return;\n    });\n\n  watchedTabClickHandler().catch(error => {\n    notifications.failedRequest();\n  });\n});\n\ninitLibraryPage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initLibraryPage() {\n  storage.save(STORAGE_KEYS.LAST_FETCH, 'WATCHED');\n\n  libraryPageUi.setLibraryEventListeners();\n\n  spinner.spin(refs.libraryGallery);\n  setTimeout(() => {\n    if (!auth.currentUser)\n      watchedTabClickHandler().catch(error => {\n        notifications.failedRequest();\n      });\n    spinner.stop();\n  }, 1500);\n}\n"],"names":["$dTJX3","parcelRequire","$amyG6","onAuthStateChanged","$cZbQA","auth","user","currentUser","$3ILHO","default","openRegistrationBtn","textContent","$bcxib","load","$8G1wF","STORAGE_KEYS","LAST_FETCH","$kak2t","queueTabClickHandler","catch","error","$2Dfe2","failedRequest","$ay12W","watchedTabClickHandler","async","save","setLibraryEventListeners","$04jNI","spinner","spin","libraryGallery","setTimeout","stop","$ce3726a01b8ab25a$var$initLibraryPage"],"version":3,"file":"library.97a5d792.js.map"}