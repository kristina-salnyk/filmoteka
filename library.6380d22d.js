var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},e.parcelRequired7c6=r);var n=r("3ILHO");n=r("3ILHO");r("4dtAK");var l=r("8LAK9"),i=r("ag3f1"),s=r("2nhTy"),d=r("ksVbb"),o=r("4dtAK");const c=async e=>(console.log(2),console.log(d.auth.currentUser),d.auth.currentUser?await(0,d.getDataFromStorage)(e):o.default.load(e));var u=r("04jNI"),f=r("oxp97");const p=async e=>{console.log(1),n.default.watchedTab.classList.add("tabs__btn--current"),n.default.queueTab.classList.remove("tabs__btn--current"),n.default.libraryGallery.innerHTML="";const t=await c(l.default.WATCHED_MOVIES);if(!t||0===t.length)return H.renderEmptyLibrary();y(t).then((e=>{b(e)}))},y=async e=>{u.spinner.spin(n.default.libraryGallery);const t=e.map((e=>(0,i.fetchMovieById)(e))),a=await Promise.all(t);return u.spinner.stop(),a},b=e=>{(0,s.default)(Math.ceil(e.length/20),f.siteConfigs.page);const t=e.map((e=>{const t={...e};t.genres=e.genres.map((e=>e.name)).join(", ");const a=new Date(e.release_date);return t.year=a.getFullYear(),t.vote=e.vote_average.toFixed(1),t}));H.appendGalleryMarkup(t)};n=r("3ILHO");r("4dtAK");l=r("8LAK9"),i=r("ag3f1"),f=r("oxp97"),s=r("2nhTy"),u=r("04jNI");const v=async e=>{n.default.queueTab.classList.add("tabs__btn--current"),n.default.watchedTab.classList.remove("tabs__btn--current"),n.default.libraryGallery.innerHTML="";const t=await c(l.default.QUEUE_MOVIES);if(!t||0===t.length)return H.renderEmptyLibrary();g(t).then((e=>{L(e)}))},g=e=>{u.spinner.spin(n.default.libraryGallery);const t=e.map((e=>(0,i.fetchMovieById)(e))),a=Promise.all(t);return u.spinner.stop(),a},L=e=>{(0,s.default)(Math.ceil(e.length/20),f.siteConfigs.page);const t=e.map((e=>{const t={...e};t.genres=e.genres.map((e=>e.name)).join(", ");const a=new Date(e.release_date);return t.year=a.getFullYear(),t.vote=e.vote_average.toFixed(1),t}));H.appendGalleryMarkup(t)};i=r("ag3f1");var h=r("cJ4l5"),m=r("2Dfe2");u=r("04jNI"),n=r("3ILHO");const T=async e=>{e.preventDefault();const t=e.target.closest("a").dataset.id;try{u.spinner.spin(n.default.libraryGallery);const e=await(0,i.fetchMovieById)(t);u.spinner.stop(),(0,h.renderOneMovieData)(e,H.appendMovieMarkup)}catch(e){m.default.failedRequest()}};var E=r("2gAtb"),w=r("hBEsZ"),M=r("9TiW2"),k=r("b986f"),_=r("9TOT1"),O=r("bZJOo");d=r("ksVbb");var H={setLibraryEventListeners:()=>{n.default.watchedTab.addEventListener("click",p),n.default.queueTab.addEventListener("click",v),n.default.libraryGallery.addEventListener("click",T),n.default.registerForm.addEventListener("submit",d.submitRegisterForm),n.default.goTopBtn.addEventListener("click",M.backToTop),window.addEventListener("scroll",M.trackScroll)},appendGalleryMarkup:e=>{n.default.libraryGallery.innerHTML=(0,E.default)(e)},appendMovieMarkup:e=>{(0,w.dynamicRefs)().movieData.innerHTML=(0,k.default)(e),(0,w.dynamicRefs)().watchedBtn.addEventListener("click",_.modalWatchedBtnClickHandler),(0,w.dynamicRefs)().queueBtn.addEventListener("click",_.modalQueueBtnClickHandler),(0,_.onOpenModal)(e.id),(0,w.dynamicRefs)().playTrailer.addEventListener("click",O.httpsYouTubeVideo)},renderEmptyLibrary:function(){n.default.libraryGallery.insertAdjacentHTML("afterbegin",'<p class="empty-page__text"> Nothing to see here<br>Add a movie please</p>')},scrollToTop:()=>{window.scrollBy(0,0)}};m=r("2Dfe2");r("hEnct"),async function(){H.setLibraryEventListeners();try{await p()}catch(e){m.default.failedRequest()}}().catch((e=>{m.default.failedRequest()}));
//# sourceMappingURL=library.6380d22d.js.map
