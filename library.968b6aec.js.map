{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,qNAuCeC,I,OAAAA,EAAfC,EAAAH,EAAA,CAAAG,EAAAC,GAAAC,MAAA,SAAAC,I,kEACEC,EAAAC,QAAQC,KAAKC,EAAAC,aAAaC,WAAY,WAEtCC,EAAAL,QAAcM,2BAEdC,YAAW,WACJC,EAAAC,KAAKC,cACR,EAAAC,EAAAC,0BAAyBC,OAAM,SAAAC,GAC7BC,EAAAf,QAAcgB,e,MAEjB,K,4CAVyBC,MAAAC,KAAAC,U,aAtB9B,EAAAC,EAAAC,oBAAmBb,EAAAC,MAAM,SAAAa,GACnBd,EAAAC,KAAKC,YACPa,EAAAvB,QAAKwB,oBAAoBC,YAAc,UAEvCF,EAAAvB,QAAKwB,oBAAoBC,YAAc,SAGK,UAA1C1B,EAAAC,QAAQ0B,KAAKxB,EAAAC,aAAaC,cAC5B,EAAAuB,EAAAC,wBAAuBf,OAAM,SAAAC,GAC3BC,EAAAf,QAAcgB,e,KAIlB,EAAAL,EAAAC,0BAAyBC,OAAM,SAAAC,GAC7BC,EAAAf,QAAcgB,e,yBAQHtB,EAAeuB,MAAAC,KAAAC,U,CAJ9BU,GAAkBhB,OAAM,SAAAC,GACtBC,EAAAf,QAAcgB,e","sources":["src/library.js"],"sourcesContent":["import libraryPageUi from './js/ui/library-page-ui';\nimport notifications from './js/notifications';\nimport './js/api/firebase/fire-base-service';\nimport './js/registration-modal';\nimport './js/load-page-pagination';\nimport './js/footer-modal';\nimport './js/swiper-slider';\nimport './js/theme';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport refs from './js/refs/refs';\nimport { watchedTabClickHandler } from './js/handlers/watchedTabClickHandler';\nimport { auth } from './js/api/firebase/fire-base-service';\nimport storage from './js/local-storage-service';\nimport { STORAGE_KEYS } from './js/constants';\nimport { queueTabClickHandler } from './js/handlers/queueTabClickHandler';\nimport { siteConfigs } from './js/SiteConfigs';\n\nonAuthStateChanged(auth, user => {\n  if (auth.currentUser) {\n    refs.openRegistrationBtn.textContent = 'Log out';\n  } else {\n    refs.openRegistrationBtn.textContent = 'Log in';\n  }\n\n  if (storage.load(STORAGE_KEYS.LAST_FETCH) === 'QUEUE')\n    queueTabClickHandler().catch(error => {\n      notifications.failedRequest();\n      return;\n    });\n\n  watchedTabClickHandler().catch(error => {\n    notifications.failedRequest();\n  });\n});\n\ninitLibraryPage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initLibraryPage() {\n  storage.save(STORAGE_KEYS.LAST_FETCH, 'WATCHED');\n\n  libraryPageUi.setLibraryEventListeners();\n\n  setTimeout(() => {\n    if (!auth.currentUser)\n      watchedTabClickHandler().catch(error => {\n        notifications.failedRequest();\n      });\n  }, 2000);\n}\n"],"names":["$bpxeT","parcelRequire","$cecbdd76f2d3d4bd$var$_initLibraryPage","$parcel$interopDefault","$2TvXO","mark","_callee","$9ekLB","default","save","$4s6iC","STORAGE_KEYS","LAST_FETCH","$5vP4W","setLibraryEventListeners","setTimeout","$fY8ZN","auth","currentUser","$fLrug","watchedTabClickHandler","catch","error","$aYvV9","failedRequest","apply","this","arguments","$3SEMc","onAuthStateChanged","user","$cqmI4","openRegistrationBtn","textContent","load","$lqhSC","queueTabClickHandler","$cecbdd76f2d3d4bd$var$initLibraryPage"],"version":3,"file":"library.968b6aec.js.map"}