{"mappings":"iiBAAA,I,EAAAA,EAAAC,EAAA,S,0BCAAC,EAAAD,EAAA,S,GCAAD,EAAAC,EAAA,S,uCCAAD,EAAAC,EAAA,S,4FAOaE,G,EAAmBC,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IACxBC,EAQAC,EAGEC,E,yEAXFF,EAAS,CACbG,OAAQ,CACNC,MAAOC,EAAAC,YAAYC,YACnBC,KAAMH,EAAAC,YAAYE,KAClBC,cAAeJ,EAAAC,YAAYI,eAIzBT,EAAMU,EAAAC,YAAYC,O,kBAGCC,EAAAC,QAAIC,IAAIf,EAAKD,G,cAA9BE,EAAQe,EAAAC,KACdC,EAAAJ,QAAQK,KAAKC,EAAAN,QAAIO,WAAY,U,kBACtBpB,EAASqB,M,kCAEhBC,EAAAT,QAAcU,gB,sGCvBlBC,EAAAjC,EAAA,S,yCAKakC,EAAmB,SAAAJ,GAC9B,IACEK,EAGEL,EAHFM,QACAC,EAEEP,EAFFQ,YAIF,GAAqB,IAFjBR,EADFS,cAGF,EAKA,EAAAC,EAAAlB,SAAiBe,EAAYzB,EAAAC,YAAYE,MAEzC,IAAM0B,EAAaN,EAAOO,KAAI,SAAAC,GAC5B,IAAMC,EAAUzC,EAAA8B,EAAA,IAAKU,GACrBC,EAAQC,OAASF,EAAgB,UAC9BD,KAAI,SAAAI,G,OAAMlC,EAAAC,YAAYkC,aAAaD,E,IACnCE,KAAK,MACR,IAAMC,EAAc,IAAIC,KAAKP,EAAmB,cAGhD,OAFAC,EAAQO,KAAOF,EAAYG,cAC3BR,EAAQS,KAAOV,EAAmB,aAAEW,QAAQ,GACrCV,C,IAGTW,EAAWC,oBAAoBf,E,MAjB7BxC,EAAAqB,QAAKmC,YAAYC,MAAMC,QAAU,O,eFPxBC,EAAuB,W,MAAGzD,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,EAAMuD,G,IAKrC/C,EAWEgD,E,qEAfRD,EAAME,iBAEN9D,EAAAqB,QAAKmC,YAAYC,MAAMC,QAAU,OAE3B7C,EAAc+C,EAAMG,cAAcC,SAASnD,YAAYoD,MAAMC,OAEnD,C,sBACdlE,EAAAqB,QAAKmC,YAAYC,MAAMC,QAAU,Q,iCAInC/C,EAAAC,YAAYuD,eAAetD,G,SAGzBuD,EAAAC,QAAQC,KAAKtE,EAAAqB,QAAKkD,a,UACOtE,I,QAAnB4D,EAAUtC,EAAAC,KAChB4C,EAAAC,QAAQG,OACRvC,EAAiB4B,G,kDAEjB7D,EAAAqB,QAAKmC,YAAYC,MAAMC,QAAU,Q,0EApBQE,G,gCAAT,G,GGNpC9D,EAAAC,EAAA,S,sCAOa0E,G,uCAAuB,W,MAAGvE,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,EAAMuD,G,IAGrCc,EAIEC,E,yEANRf,EAAME,iBAEAY,EAAUd,EAAMgB,OAAOC,QAAQ,KAAKC,QAAQjC,G,SAGhDuB,EAAAC,QAAQC,KAAKtE,EAAAqB,QAAKkD,a,UACM,EAAAQ,EAAAC,gBAAeN,G,OAAjCC,EAASpD,EAAAC,KACf4C,EAAAC,QAAQG,QACR,EAAAS,EAAAC,oBAAmBP,EAAWrB,EAAW6B,mB,kDAEzCrD,EAAAT,QAAcU,gB,0EAX2B6B,G,gCAAT,I,2FJuCpCN,EAAe,CACb8B,sBA/B4B,WAC5BpF,EAAAqB,QAAKgE,WAAWC,iBAAiB,SAAU3B,GAC3C3D,EAAAqB,QAAKkD,YAAYe,iBAAiB,QAASb,GAE3CzE,EAAAqB,QAAKkE,SAASD,iBAAiB,QAASE,EAAAC,WACxCC,OAAOJ,iBAAiB,SAAUE,EAAAG,aAElC3F,EAAAqB,QAAKuE,aAAaN,iBAAiB,SAAUO,EAAAC,mB,EAyB7CvC,oBAtB0B,SAAArB,GAC1BlC,EAAAqB,QAAKkD,YAAYwB,WAAY,EAAAC,EAAA3E,SAAWa,E,EAsBxCiD,kBAnBwB,SAAAc,IACxB,EAAAC,EAAAC,eAAcxB,UAAUoB,WAAY,EAAAK,EAAA/E,SAAW4E,IAE/C,EAAAC,EAAAC,eAAcE,WAAWf,iBACvB,QACAgB,EAAAC,8BAEF,EAAAL,EAAAC,eAAcK,SAASlB,iBAAiB,QAASgB,EAAAG,4BACjD,EAAAH,EAAAI,aAAYT,EAAMpD,KAClB,EAAAqD,EAAAC,eAAcQ,YAAYrB,iBAAiB,QAASsB,EAAAC,kB,EAWpDC,WARiB,WACjBpB,OAAOqB,SAAS,EAAG,E,2BK3CrBjH,EAAAC,EAAA,S,oDAAA,IAIaiH,EAAe,W,MAAG9G,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IACvBE,EAGEC,E,yEAHFD,EAAM,GAAsB0G,OAAnBhG,EAAAC,YAAYgG,Q,kBAGF9F,EAAAC,QAAIC,IAAIf,G,cAAzBC,EAAQe,EAAAC,K,kBACPhB,EAASqB,M,gCAEhBC,EAAAT,QAAcU,gB,2GAPU,GCGfoF,GAPbrH,EAAAC,EAAA,S,2FAOgC,W,MAAGG,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IAC3BC,EAMAC,EAGEC,E,yEATFF,EAAS,CACbG,OAAQ,CACNK,KAAMH,EAAAC,YAAYE,OAIhBP,EAAM,GAA2B0G,OAAxBhG,EAAAC,YAAYkG,SAAS,KAA4BH,OAAzBtG,EAAAC,YAAYyG,UAAU,KAA0BJ,OAAvBtG,EAAAC,YAAY0G,Y,kBAGnDlG,EAAAC,QAAIC,IAAIf,EAAKD,G,cAA9BE,EAAQe,EAAAC,KACdC,EAAAJ,QAAQK,KAAKC,EAAAN,QAAIO,WAAY,Y,kBACtBpB,EAASqB,M,kCAEhBC,EAAAT,QAAcU,gB,4GAdc,KCP/B,WACC,IAAMwF,EAAO,CACXC,aAAcC,SAASC,cAAc,4BACrCC,cAAeF,SAASC,cAAc,6BACtCE,YAAaH,SAASC,cAAc,iBAMtC,SAASG,IACPJ,SAASK,KAAKC,UAAUC,OAAO,cAC/BT,EAAKK,YAAYG,UAAUC,OAAO,Y,CALpCT,EAAKC,aAAalC,iBAAiB,QAASuC,GAC5CN,EAAKI,cAAcrC,iBAAiB,QAASuC,EAM9C,CAdA,G,WCAD/H,EAAAC,EAAA,S,iHAyCekI,I,OAAAC,EAAUC,MAAAC,KAAAC,U,UAAVH,I,OAAAA,EAAfhI,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IAIYiI,EAWAzG,E,qEAd2B,aAAjCJ,EAAAJ,QAAQkH,KAAK5G,EAAAN,QAAIO,YAA0B,C,gCAE3CwC,EAAAC,QAAQC,KAAKtE,EAAAqB,QAAKkD,a,SACS4C,I,OAArBmB,EAAY/G,EAAAC,KAClB4C,EAAAC,QAAQG,OACRvC,EAAiBqG,G,kDAEjBxG,EAAAT,QAAcU,gB,WAImB,WAAjCN,EAAAJ,QAAQkH,KAAK5G,EAAAN,QAAIO,YAAwB,C,iCAEzCwC,EAAAC,QAAQC,KAAKtE,EAAAqB,QAAKkD,a,UACCtE,I,QAAb4B,EAAIN,EAAAC,KACV4C,EAAAC,QAAQG,OACRvC,EAAiBJ,G,mDAEjBC,EAAAT,QAAcU,gB,mEAnBKoG,MAAAC,KAAAC,U,EA9BzB,EAAAnC,EAAAC,eAAcqC,UAAUlD,iBAAiB,SAgBzC,SAAoBmD,GAElB,GADAA,EAAE3E,iBACwB,WAAtB2E,EAAE7D,OAAO8D,SACX,OAGF,GAAgC,MAA5BD,EAAE7D,OAAOE,QAAQ6D,OAAgB,CACnC,IAAM7H,EAAO8H,OAAOH,EAAE7D,OAAOE,QAAQ6D,QACrChI,EAAAC,YAAYE,KAAOA,EACnBd,EAAAqB,QAAKkD,YAAYwB,UAAY,GAC7BkC,G,MAzBJ,EAAA/B,EAAAC,eAAc0C,WAAWvD,iBAAiB,SAS1C,WACE3E,EAAAC,YAAYkI,gBACZ9I,EAAAqB,QAAKkD,YAAYwB,UAAY,GAC7BkC,G,KAXF,EAAA/B,EAAAC,eAAc4C,UAAUzD,iBAAiB,SAEzC,WACE3E,EAAAC,YAAYoI,gBACZhJ,EAAAqB,QAAKkD,YAAYwB,UAAY,GAC7BkC,G,uCTDagB,I,OAAAA,EAAf/I,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IAKU6I,EACEtG,EAGF0F,E,yEARRhF,EAAW8B,wB,SAGThB,EAAAC,QAAQC,KAAKtE,EAAAqB,QAAKkD,a,SACOyC,I,cAAnBkC,EAAU3H,EAAAC,KACVoB,EAAasG,EAAXtG,OACRjC,EAAAC,YAAYgC,OAASA,E,UAEMuE,I,QAArBmB,EAAY/G,EAAAC,KAClB4C,EAAAC,QAAQG,OACRvC,EAAiBqG,G,kDAEjBxG,EAAAT,QAAcU,gB,2DAbSoG,MAAAC,KAAAC,U,oBAAZY,EAAYd,MAAAC,KAAAC,U,EAJ3Bc,GAAeC,OAAM,SAAAC,GACnBvH,EAAAT,QAAcU,e","sources":["src/index.js","src/js/ui/home-page-ui.js","src/js/handlers/searchFormSubmitHandler.js","src/js/api/movie-api/fetchSearchMovie.js","src/js/render/renderMoviesData.js","src/js/handlers/homeGalleryClickHandler.js","src/js/api/movie-api/fetchGenresList.js","src/js/api/movie-api/fetchTrendingMovies.js","src/js/footer-modal.js","src/js/loadPagePagination.js"],"sourcesContent":["import { siteConfigs } from './js/SiteConfigs';\nimport homePageUi from './js/ui/home-page-ui';\nimport notifications from './js/notifications';\nimport './js/api/firebase/fireBase';\nimport { fetchGenresList } from './js/api/movie-api/fetchGenresList';\nimport { fetchTrendingMovies } from './js/api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './js/render/renderMoviesData';\nimport './js/footer-modal';\nimport './js/registration-modal';\nimport './js/loadPagePagination';\nimport { spinner } from './js/spinner';\nimport refs from './js/refs/refs';\n\ninitHomePage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initHomePage() {\n  homePageUi.setHomeEventListeners();\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const genresData = await fetchGenresList();\n    const { genres } = genresData;\n    siteConfigs.genres = genres;\n\n    const trendingData = await fetchTrendingMovies();\n    spinner.stop();\n    renderMoviesData(trendingData);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n}\n","import refs from '../refs/refs';\nimport { searchFormSubmitHandler } from '../handlers/searchFormSubmitHandler';\nimport { homeGalleryClickHandler } from '../handlers/homeGalleryClickHandler';\nimport { dynamicRefs } from '../refs/dynamicRefs';\nimport { trackScroll, backToTop } from '../handlers/scrollUpClickHandler';\nimport movieCards from '../../templates/movie-card.hbs';\nimport modalMovie from '../../templates/modal-for-movie.hbs';\nimport { submitRegisterForm } from '../api/firebase/fireBase';\n\nimport {\n  modalWatchedBtnClickHandler,\n  modalQueueBtnClickHandler,\n  onOpenModal,\n} from '../handlers/modalBtnsClickHandler';\nimport { httpsYouTubeVideo } from '../you-tube';\n\nconst setHomeEventListeners = () => {\n  refs.searchForm.addEventListener('submit', searchFormSubmitHandler);\n  refs.homeGallery.addEventListener('click', homeGalleryClickHandler);\n\n  refs.goTopBtn.addEventListener('click', backToTop);\n  window.addEventListener('scroll', trackScroll);\n\n  refs.registerForm.addEventListener('submit', submitRegisterForm);\n};\n\nconst appendGalleryMarkup = movies => {\n  refs.homeGallery.innerHTML = movieCards(movies);\n};\n\nconst appendMovieMarkup = movie => {\n  dynamicRefs().movieData.innerHTML = modalMovie(movie);\n\n  dynamicRefs().watchedBtn.addEventListener(\n    'click',\n    modalWatchedBtnClickHandler\n  );\n  dynamicRefs().queueBtn.addEventListener('click', modalQueueBtnClickHandler);\n  onOpenModal(movie.id);\n  dynamicRefs().playTrailer.addEventListener('click', httpsYouTubeVideo);\n};\n\nconst scrollToUp = () => {\n  window.scrollBy(0, 0);\n};\n\nexport default {\n  setHomeEventListeners,\n  appendGalleryMarkup,\n  appendMovieMarkup,\n  scrollToUp,\n};\n","import { siteConfigs } from '../SiteConfigs';\nimport refs from '../refs/refs';\nimport { fetchSearchMovie } from '../api/movie-api/fetchSearchMovie';\nimport { renderMoviesData } from '../render/renderMoviesData';\nimport { spinner } from '../spinner';\n\nexport const searchFormSubmitHandler = async event => {\n  event.preventDefault();\n\n  refs.searchError.style.display = 'none';\n\n  const searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  siteConfigs.setSearchQuery(searchQuery);\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const searchData = await fetchSearchMovie();\n    spinner.stop();\n    renderMoviesData(searchData);\n  } catch (error) {\n    refs.searchError.style.display = 'block';\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { siteConfigs } from '../../SiteConfigs';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchSearchMovie = async () => {\n  const config = {\n    params: {\n      query: siteConfigs.searchQuery,\n      page: siteConfigs.page,\n      include_adult: siteConfigs.includeAdult,\n    },\n  };\n\n  const url = REQUEST_URL.SEARCH;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'SEARCH');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import { siteConfigs } from '../SiteConfigs';\nimport refs from '../refs/refs';\nimport homePageUi from '../ui/home-page-ui';\nimport paginationMarkup from '../pagination';\n\nexport const renderMoviesData = data => {\n  const {\n    results: movies,\n    total_pages: totalPages,\n    total_results: totalResults,\n  } = data;\n\n  if (totalResults === 0) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  paginationMarkup(totalPages, siteConfigs.page);\n\n  const moviesData = movies.map(item => {\n    const newItem = { ...item };\n    newItem.genres = item['genre_ids']\n      .map(id => siteConfigs.getGenreById(id))\n      .join(', ');\n    const releaseDate = new Date(item['release_date']);\n    newItem.year = releaseDate.getFullYear();\n    newItem.vote = item['vote_average'].toFixed(1);\n    return newItem;\n  });\n\n  homePageUi.appendGalleryMarkup(moviesData);\n};\n","import { fetchMovieById } from '../api/movie-api/fetchMovieById';\nimport { renderOneMovieData } from '../render/renderOneMovieData';\nimport notifications from '../notifications';\nimport homePageUi from '../ui/home-page-ui';\nimport { spinner } from '../spinner';\nimport refs from '../refs/refs';\n\nexport const homeGalleryClickHandler = async event => {\n  event.preventDefault();\n\n  const movieId = event.target.closest('a').dataset.id;\n\n  try {\n    spinner.spin(refs.homeGallery);\n    const movieData = await fetchMovieById(movieId);\n    spinner.stop();\n    renderOneMovieData(movieData, homePageUi.appendMovieMarkup);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport notifications from '../../notifications';\n\nexport const fetchGenresList = async () => {\n  const url = `${REQUEST_URL.GENRES}`;\n\n  try {\n    const response = await api.get(url);\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { siteConfigs } from '../../SiteConfigs';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchTrendingMovies = async () => {\n  const config = {\n    params: {\n      page: siteConfigs.page,\n    },\n  };\n\n  const url = `${REQUEST_URL.TRENDING}/${siteConfigs.mediaType}/${siteConfigs.timeWindow}`;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'TRENDING');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","(() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-footer-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-footer-modal-close]\"),\n    footerModal: document.querySelector(\"[data-modal]\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    document.body.classList.toggle(\"modal-open\");\n    refs.footerModal.classList.toggle(\"is-hidden\");\n  }\n})();","import refs from './refs/refs';\nimport { siteConfigs } from './SiteConfigs';\nimport { dynamicRefs } from './refs/dynamicRefs';\nimport { fetchTrendingMovies } from './api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './render/renderMoviesData';\nimport { fetchSearchMovie } from './api/movie-api/fetchSearchMovie';\nimport notifications from './notifications';\nimport storege from './local-storage/local-storage-service';\nimport key from './local-storage/local-storage-keys';\nimport { spinner } from './spinner';\n\ndynamicRefs().paginList.addEventListener('click', getNewPage);\ndynamicRefs().rightArrow.addEventListener('click', rightBtnClick);\ndynamicRefs().leftArrow.addEventListener('click', leftBtnClick);\n\nfunction leftBtnClick() {\n  siteConfigs.decrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction rightBtnClick() {\n  siteConfigs.incrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction getNewPage(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.dataset.number !== '0') {\n    const page = Number(e.target.dataset.number);\n    siteConfigs.page = page;\n    refs.homeGallery.innerHTML = '';\n    loadMovies();\n  }\n}\n\nasync function loadMovies() {\n  if (storege.load(key.LAST_FETCH) === 'TRENDING') {\n    try {\n      spinner.spin(refs.homeGallery);\n      const trendingData = await fetchTrendingMovies();\n      spinner.stop();\n      renderMoviesData(trendingData);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n\n  if (storege.load(key.LAST_FETCH) === 'SEARCH') {\n    try {\n      spinner.spin(refs.homeGallery);\n      const data = await fetchSearchMovie();\n      spinner.stop();\n      renderMoviesData(data);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$cqmI4","$b0a69c4b7e6feacd$export$b7b604fc4e6868b3","$parcel$interopDefault","$2TvXO","mark","_callee","config","url","response","params","query","$ismrh","siteConfigs","searchQuery","page","include_adult","includeAdult","$4s6iC","REQUEST_URL","SEARCH","$lu0v5","default","get","_ctx","sent","$daTbb","save","$2hVIf","LAST_FETCH","data","$aYvV9","failedRequest","$dDDEV","$39152461fc5364ef$export$f7f786f89bc6ea16","movies","results","totalPages","total_pages","total_results","$jcFG7","moviesData","map","item","newItem","genres","id","getGenreById","join","releaseDate","Date","year","getFullYear","vote","toFixed","$361ea4774fb885e6$export$2e2bcd8739ae039","appendGalleryMarkup","searchError","style","display","$1e6d4254e0978418$export$4e08842eeca88a89","event","searchData","preventDefault","currentTarget","elements","value","trim","setSearchQuery","$j1lrD","spinner","spin","homeGallery","stop","$98f7501f110cc5dc$export$4b0a611b144735ad","movieId","movieData","target","closest","dataset","$bDPyF","fetchMovieById","$frmlX","renderOneMovieData","appendMovieMarkup","setHomeEventListeners","searchForm","addEventListener","goTopBtn","$iObGl","backToTop","window","trackScroll","registerForm","$hE6Pt","submitRegisterForm","innerHTML","$8pYMx","movie","$d5Phe","dynamicRefs","$1MwiW","watchedBtn","$8gEWs","modalWatchedBtnClickHandler","queueBtn","modalQueueBtnClickHandler","onOpenModal","playTrailer","$hV87x","httpsYouTubeVideo","scrollToUp","scrollBy","$e0741441063bbb43$export$d60bdeaf43923027","concat","GENRES","$5fd230e4038851f4$export$a2840eca364d9ff2","TRENDING","mediaType","timeWindow","refs","openModalBtn","document","querySelector","closeModalBtn","footerModal","toggleModal","body","classList","toggle","$98eac736ce0bc683$var$loadMovies","$98eac736ce0bc683$var$_loadMovies","apply","this","arguments","trendingData","load","paginList","e","nodeName","number","Number","rightArrow","incrementPage","leftArrow","decrementPage","$b8f9b7833fa37166$var$_initHomePage","genresData","$b8f9b7833fa37166$var$initHomePage","catch","error"],"version":3,"file":"index.087d0040.js.map"}