{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,SCAAC,EAAAD,EAAA,SAEO,MAAME,EAAyBC,IACpCF,EAAAG,QAAKC,WAAWC,UAAUC,IAAI,sBAC9BN,EAAAG,QAAKI,SAASF,UAAUG,OAAO,qBAAqB,ECJtDR,EAAAD,EAAA,a,oDAOO,MAAMU,EAAuBP,IAClCF,EAAAG,QAAKI,SAASF,UAAUC,IAAI,sBAC5BN,EAAAG,QAAKC,WAAWC,UAAUG,OAAO,sBACjC,MAAME,EAAgBC,EAAAR,QAAQS,KAAKC,EAAAV,QAAIW,cACvCC,QAAQC,IAAIN,GACZO,EAAgBP,GAAeQ,MAAKC,IAClC,MAAMC,EAAO,CACXC,QAASF,EACTG,YAAaH,EAAKI,OAAS,GAC3BC,cAAeL,EAAKI,QAEtBE,EAAwBL,EAAK,GAC7B,EAGEH,EAAkBS,IACtB,MAAMC,EAAgBD,EAAIE,KAAIC,IAAM,EAAAC,EAAAC,gBAAeF,KAEnD,OADeG,QAAQC,IAAIN,EACd,EAGTF,EAA0BN,IAC9B,MACEE,QAASa,EACTZ,YAAaa,EACbX,cAAeY,GACbjB,EAIEkB,EAAaH,EAAON,KAAIU,IAC5B,MAAMC,EAAU,IAAKD,GACrBC,EAAQC,OAASF,EAAgB,UAC9BV,KAAIC,GAAMY,EAAAC,aAAaC,aAAad,KACpCe,KAAK,MACR,MAAMC,EAAc,IAAIC,KAAKR,EAAmB,cAGhD,OAFAC,EAAQQ,KAAOF,EAAYG,cAC3BT,EAAQU,KAAOX,EAAmB,aAAEY,QAAQ,GACrCX,CAAO,IAGhBY,EAAcC,oBAAoBf,EAAW,E,qBFlC/Cc,EAAe,C,yBATkB,KAC/BnD,EAAAG,QAAKC,WAAWiD,iBAAiB,QAASpD,GAC1CD,EAAAG,QAAKI,SAAS8C,iBAAiB,QAAS5C,EAAqB,E,oBAGnCyB,IAC1BlC,EAAAG,QAAKmD,eAAeC,WAAY,EAAAC,EAAArD,SAAW+B,EAAO,G,aDPxB,IAAI,EAAApC,EAAAK,UAMhCsD,iBACEN,EAAcO,0B,EALhBC,GAAkBC,OAAMC,IACtBC,EAAA3D,QAAc4D,eAAe","sources":["src/library.js","src/js/ui/library-page-ui.js","src/js/handlers/watchedTabClickHandler.js","src/js/handlers/queueTabClickHandler.js"],"sourcesContent":["import MovieConfigs from './js/MovieConfigs';\nimport libraryPageUi from './js/ui/library-page-ui';\nimport notifications from './js/notifications';\n\nexport const movieConfigs = new MovieConfigs();\n\ninitLibraryPage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initLibraryPage() {\n  libraryPageUi.setLibraryEventListeners();\n}\n","import refs from '../refs/refs';\nimport { watchedTabClickHandler } from '../handlers/watchedTabClickHandler';\nimport { queueTabClickHandler } from '../handlers/queueTabClickHandler';\nimport movieCards from '../../templates/movie-card.hbs';\n\nconst setLibraryEventListeners = () => {\n  refs.watchedTab.addEventListener('click', watchedTabClickHandler);\n  refs.queueTab.addEventListener('click', queueTabClickHandler);\n};\n\nconst appendGalleryMarkup = movies => {\n  refs.libraryGallery.innerHTML = movieCards(movies);\n};\n\nexport default { setLibraryEventListeners, appendGalleryMarkup };\n","import refs from '../refs/refs';\n\nexport const watchedTabClickHandler = event => {\n  refs.watchedTab.classList.add('tabs__btn--current');\n  refs.queueTab.classList.remove('tabs__btn--current');\n};\n","import refs from '../refs/refs';\nimport storage from '../local-storage/local-storage-service';\nimport key from '../local-storage/local-storage-keys';\nimport { fetchMovieById } from '../api/movie-api/fetchMovieById';\nimport { movieConfigs } from '../../index';\nimport libraryPageUi from '../ui/library-page-ui';\n\nexport const queueTabClickHandler = event => {\n  refs.queueTab.classList.add('tabs__btn--current');\n  refs.watchedTab.classList.remove('tabs__btn--current');\n  const queueMovieIds = storage.load(key.QUEUE_MOVIES);\n  console.log(queueMovieIds);\n  processMovieIds(queueMovieIds).then(data => {\n    const test = {\n      results: data,\n      total_pages: data.length / 20,\n      total_results: data.length,\n    };\n    renderLibraryMoviesData(test);\n  });\n};\n\nconst processMovieIds = ids => {\n  const movieRequests = ids.map(id => fetchMovieById(id));\n  const result = Promise.all(movieRequests);\n  return result;\n};\n\nconst renderLibraryMoviesData = data => {\n  const {\n    results: movies,\n    total_pages: totalPages,\n    total_results: totalResults,\n  } = data;\n\n  // paginationMarkup(totalPages, movieConfigs.page);\n\n  const moviesData = movies.map(item => {\n    const newItem = { ...item };\n    newItem.genres = item['genre_ids']\n      .map(id => movieConfigs.getGenreById(id))\n      .join(', ');\n    const releaseDate = new Date(item['release_date']);\n    newItem.year = releaseDate.getFullYear();\n    newItem.vote = item['vote_average'].toFixed(1);\n    return newItem;\n  });\n\n  libraryPageUi.appendGalleryMarkup(moviesData);\n};\n"],"names":["$53vTJ","parcelRequire","$3ILHO","$7adde4241450315e$export$1d0eac70273ba650","event","default","watchedTab","classList","add","queueTab","remove","$eae4491cd19a0087$export$b893da611cba23f2","queueMovieIds","$4dtAK","load","$8LAK9","QUEUE_MOVIES","console","log","$eae4491cd19a0087$var$processMovieIds","then","data","test","results","total_pages","length","total_results","$eae4491cd19a0087$var$renderLibraryMoviesData","ids","movieRequests","map","id","$ag3f1","fetchMovieById","Promise","all","movies","totalPages","totalResults","moviesData","item","newItem","genres","$2Fivl","movieConfigs","getGenreById","join","releaseDate","Date","year","getFullYear","vote","toFixed","$a1e40e66b3fe34e7$export$2e2bcd8739ae039","appendGalleryMarkup","addEventListener","libraryGallery","innerHTML","$2gAtb","async","setLibraryEventListeners","$ce3726a01b8ab25a$var$initLibraryPage","catch","error","$2Dfe2","failedRequest"],"version":3,"file":"library.b03e4a2a.js.map"}