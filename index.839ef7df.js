var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var r=n("53vTJ"),l=n("3ILHO"),o=(l=n("3ILHO"),n("3v5re")),d=n("8G1wF"),s=n("2Dfe2"),i=n("4dtAK"),c=n("8LAK9");const u=async()=>{const e={params:{query:B.searchQuery,page:B.page,include_adult:B.includeAdult}},t=d.REQUEST_URL.SEARCH;try{const a=await o.default.get(t,e);return i.default.save(c.default.LAST_FETCH,"SEARCH"),a.data}catch(e){s.default.failedRequest()}};l=n("3ILHO");var f=n("2nhTy");const p=e=>{const{results:t,total_pages:a,total_results:n}=e;if(0===n)return void(l.default.searchError.style.display="block");(0,f.default)(a,B.page);const r=t.map((e=>{const t={...e};t.genres=e.genre_ids.map((e=>B.getGenreById(e))).join(", ");const a=new Date(e.release_date);return t.year=a.getFullYear(),t.vote=e.vote_average.toFixed(1),t}));M.appendGalleryMarkup(r)};var y=n("04jNI");const m=async e=>{e.preventDefault(),l.default.searchError.style.display="none";const t=e.currentTarget.elements.searchQuery.value.trim();if(t){B.setSearchQuery(t);try{y.spinner.spin(l.default.homeGallery);const e=await u();y.spinner.stop(),p(e)}catch(e){l.default.searchError.style.display="block"}}else l.default.searchError.style.display="block"};var v=n("ag3f1"),h=n("cJ4l5");s=n("2Dfe2"),y=n("04jNI"),l=n("3ILHO");const g=async e=>{e.preventDefault();const t=e.target.closest("a").dataset.id;try{y.spinner.spin(l.default.homeGallery);const e=await(0,v.fetchMovieById)(t);y.spinner.stop(),(0,h.renderOneMovieData)(e,M.appendMovieMarkup)}catch(e){s.default.failedRequest()}};var E=n("hBEsZ");l=n("3ILHO");const L=()=>{const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t&&l.default.goTopBtn.classList.add("back-to-top_show"),e<t&&l.default.goTopBtn.classList.remove("back-to-top_show")},T=()=>{window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})};var w=n("2gAtb"),R=n("b986f"),H=n("9TOT1"),k=n("bZJOo");var M={setHomeEventListeners:()=>{l.default.searchForm.addEventListener("submit",m),l.default.homeGallery.addEventListener("click",g),l.default.goTopBtn.addEventListener("click",T),window.addEventListener("scroll",L)},appendGalleryMarkup:e=>{l.default.homeGallery.innerHTML=(0,w.default)(e)},appendMovieMarkup:e=>{(0,E.dynamicRefs)().movieData.innerHTML=(0,R.default)(e),(0,E.dynamicRefs)().watchedBtn.addEventListener("click",H.modalWatchedBtnClickHandler),(0,E.dynamicRefs)().queueBtn.addEventListener("click",H.modalQueueBtnClickHandler),(0,H.onOpenModal)(e.id),(0,E.dynamicRefs)().playTrailer.addEventListener("click",k.httpsYouTubeVideo)},scrollToUp:()=>{window.scrollBy(0,0)}};s=n("2Dfe2"),o=n("3v5re"),d=n("8G1wF"),s=n("2Dfe2");const G=async()=>{const e=`${d.REQUEST_URL.GENRES}`;try{return(await o.default.get(e)).data}catch(e){s.default.failedRequest()}};o=n("3v5re"),d=n("8G1wF"),s=n("2Dfe2"),i=n("4dtAK"),c=n("8LAK9");const b=async()=>{const e={params:{page:B.page}},t=`${d.REQUEST_URL.TRENDING}/${B.mediaType}/${B.timeWindow}`;try{const a=await o.default.get(t,e);return i.default.save(c.default.LAST_FETCH,"TRENDING"),a.data}catch(e){s.default.failedRequest()}};(()=>{const e={openModalBtn:document.querySelector("[data-footer-modal-open]"),closeModalBtn:document.querySelector("[data-footer-modal-close]"),footerModal:document.querySelector("[data-modal]")};function t(){document.body.classList.toggle("modal-open"),e.footerModal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})(),n("hEnct");l=n("3ILHO"),E=n("hBEsZ"),s=n("2Dfe2"),i=n("4dtAK"),c=n("8LAK9"),y=n("04jNI");async function A(){if("TRENDING"===i.default.load(c.default.LAST_FETCH))try{y.spinner.spin(l.default.homeGallery);const e=await b();y.spinner.stop(),p(e)}catch(e){s.default.failedRequest()}if("SEARCH"===i.default.load(c.default.LAST_FETCH))try{y.spinner.spin(l.default.homeGallery);const e=await u();y.spinner.stop(),p(e)}catch(e){s.default.failedRequest()}}(0,E.dynamicRefs)().paginList.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;if("0"!==e.target.dataset.number){const t=Number(e.target.dataset.number);B.page=t,l.default.homeGallery.innerHTML="",A()}})),(0,E.dynamicRefs)().rightArrow.addEventListener("click",(function(){B.incrementPage(),l.default.homeGallery.innerHTML="",A()})),(0,E.dynamicRefs)().leftArrow.addEventListener("click",(function(){B.decrementPage(),l.default.homeGallery.innerHTML="",A()}));y=n("04jNI"),l=n("3ILHO");const B=new(0,r.default);(async function(){M.setHomeEventListeners();try{y.spinner.spin(l.default.homeGallery);const e=await G(),{genres:t}=e;B.genres=t;const a=await b();y.spinner.stop(),p(a)}catch(e){s.default.failedRequest()}})().catch((e=>{s.default.failedRequest()}));
//# sourceMappingURL=index.839ef7df.js.map
