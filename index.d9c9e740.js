var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var o=n("oxp97"),s=n("3ILHO"),r=(o=n("oxp97"),s=n("3ILHO"),n("3v5re")),l=n("8G1wF"),d=(o=n("oxp97"),n("2Dfe2")),i=n("4dtAK"),c=n("8LAK9");const f=async()=>{const e={params:{query:o.siteConfigs.searchQuery,page:o.siteConfigs.page,include_adult:o.siteConfigs.includeAdult}},t=l.REQUEST_URL.SEARCH;try{const a=await r.default.get(t,e);return i.default.save(c.default.LAST_FETCH,"SEARCH"),a.data}catch(e){d.default.failedRequest()}};o=n("oxp97"),s=n("3ILHO");var u=n("2nhTy");const p=e=>{const{results:t,total_pages:a,total_results:n}=e;if(0===n)return void(s.default.searchError.style.display="block");(0,u.default)(a,o.siteConfigs.page);const r=t.map((e=>{const t={...e};t.genres=e.genre_ids.map((e=>o.siteConfigs.getGenreById(e))).join(", ");const a=new Date(e.release_date);return t.year=a.getFullYear(),t.vote=e.vote_average.toFixed(1),t}));k.appendGalleryMarkup(r)};var y=n("04jNI");const g=async e=>{e.preventDefault(),s.default.searchError.style.display="none";const t=e.currentTarget.elements.searchQuery.value.trim();if(t){o.siteConfigs.setSearchQuery(t);try{y.spinner.spin(s.default.homeGallery);const e=await f();y.spinner.stop(),p(e)}catch(e){s.default.searchError.style.display="block"}}else s.default.searchError.style.display="block"};var m=n("ag3f1"),h=n("cJ4l5");d=n("2Dfe2"),y=n("04jNI"),s=n("3ILHO");const v=async e=>{e.preventDefault();const t=e.target.closest("a").dataset.id;try{y.spinner.spin(s.default.homeGallery);const e=await(0,m.fetchMovieById)(t);y.spinner.stop(),(0,h.renderOneMovieData)(e,k.appendMovieMarkup)}catch(e){d.default.failedRequest()}};var E=n("hBEsZ");s=n("3ILHO");const L=()=>{const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t&&s.default.goTopBtn.classList.add("back-to-top_show"),e<t&&s.default.goTopBtn.classList.remove("back-to-top_show")},T=()=>{window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})};var w=n("2gAtb"),R=n("b986f"),H=n("9TOT1"),C=n("bZJOo");var k={setHomeEventListeners:()=>{s.default.searchForm.addEventListener("submit",g),s.default.homeGallery.addEventListener("click",v),s.default.goTopBtn.addEventListener("click",T),window.addEventListener("scroll",L)},appendGalleryMarkup:e=>{s.default.homeGallery.innerHTML=(0,w.default)(e)},appendMovieMarkup:e=>{(0,E.dynamicRefs)().movieData.innerHTML=(0,R.default)(e),(0,E.dynamicRefs)().watchedBtn.addEventListener("click",H.modalWatchedBtnClickHandler),(0,E.dynamicRefs)().queueBtn.addEventListener("click",H.modalQueueBtnClickHandler),(0,H.onOpenModal)(e.id),(0,E.dynamicRefs)().playTrailer.addEventListener("click",C.httpsYouTubeVideo)},scrollToUp:()=>{window.scrollBy(0,0)}};d=n("2Dfe2"),r=n("3v5re"),l=n("8G1wF"),d=n("2Dfe2");const M=async()=>{const e=`${l.REQUEST_URL.GENRES}`;try{return(await r.default.get(e)).data}catch(e){d.default.failedRequest()}};r=n("3v5re"),l=n("8G1wF"),o=n("oxp97"),d=n("2Dfe2"),i=n("4dtAK"),c=n("8LAK9");const G=async()=>{const e={params:{page:o.siteConfigs.page}},t=`${l.REQUEST_URL.TRENDING}/${o.siteConfigs.mediaType}/${o.siteConfigs.timeWindow}`;try{const a=await r.default.get(t,e);return i.default.save(c.default.LAST_FETCH,"TRENDING"),a.data}catch(e){d.default.failedRequest()}};(()=>{const e={openModalBtn:document.querySelector("[data-footer-modal-open]"),closeModalBtn:document.querySelector("[data-footer-modal-close]"),footerModal:document.querySelector("[data-modal]")};function t(){document.body.classList.toggle("modal-open"),e.footerModal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})(),n("hEnct");s=n("3ILHO"),o=n("oxp97"),E=n("hBEsZ"),d=n("2Dfe2"),i=n("4dtAK"),c=n("8LAK9"),y=n("04jNI");async function b(){if("TRENDING"===i.default.load(c.default.LAST_FETCH))try{y.spinner.spin(s.default.homeGallery);const e=await G();y.spinner.stop(),p(e)}catch(e){d.default.failedRequest()}if("SEARCH"===i.default.load(c.default.LAST_FETCH))try{y.spinner.spin(s.default.homeGallery);const e=await f();y.spinner.stop(),p(e)}catch(e){d.default.failedRequest()}}(0,E.dynamicRefs)().paginList.addEventListener("click",(function(e){if(e.preventDefault(),"BUTTON"!==e.target.nodeName)return;if("0"!==e.target.dataset.number){const t=Number(e.target.dataset.number);o.siteConfigs.page=t,s.default.homeGallery.innerHTML="",b()}})),(0,E.dynamicRefs)().rightArrow.addEventListener("click",(function(){o.siteConfigs.incrementPage(),s.default.homeGallery.innerHTML="",b()})),(0,E.dynamicRefs)().leftArrow.addEventListener("click",(function(){o.siteConfigs.decrementPage(),s.default.homeGallery.innerHTML="",b()}));y=n("04jNI"),s=n("3ILHO");(async function(){k.setHomeEventListeners();try{y.spinner.spin(s.default.homeGallery);const e=await M(),{genres:t}=e;o.siteConfigs.genres=t;const a=await G();y.spinner.stop(),p(a)}catch(e){d.default.failedRequest()}})().catch((e=>{d.default.failedRequest()}));
//# sourceMappingURL=index.d9c9e740.js.map
