{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BCAAC,EAAAD,EAAA,SCEaE,GAFbD,EAAAD,EAAA,SAEsC,SAAAG,GACpCF,EAAAG,QAAKC,WAAWC,UAAUC,IAAI,sBAC9BN,EAAAG,QAAKI,SAASF,UAAUG,OAAO,qB,GCJjCC,EAAAV,EAAA,S,sDAOaW,EAAuB,SAAAR,GAClCF,EAAAG,QAAKI,SAASF,UAAUC,IAAI,sBAC5BN,EAAAG,QAAKC,WAAWC,UAAUG,OAAO,sBACjC,IAAMG,EAAgBC,EAAAT,QAAQU,KAAKC,EAAAX,QAAIY,cACvCC,QAAQC,IAAIN,GACZO,EAAgBP,GAAeQ,MAAK,SAAAC,GAClC,IAAMC,EAAO,CACXC,QAASF,EACTG,YAAaH,EAAKI,OAAS,GAC3BC,cAAeL,EAAKI,QAEtBE,EAAwBL,E,KAItBH,EAAkB,SAAAS,GACtB,IAAMC,EAAgBD,EAAIE,KAAI,SAAAC,G,OAAM,EAAAC,EAAAC,gBAAeF,E,IAEnD,OADeG,QAAQC,IAAIN,E,EAIvBF,EAA0B,SAAAN,GAC9B,IACEe,EAGEf,EAHFE,QAOIc,GAJFhB,EAFFG,YAEEH,EADFK,cAKiBU,EAAON,KAAI,SAAAQ,GAC5B,IAAMC,EAAUC,EAAA9B,EAAA,IAAK4B,GAIfG,EAAc,IAAIC,KAAKJ,EAAmB,cAGhD,OAFAC,EAAQI,KAAOF,EAAYG,cAC3BL,EAAQM,KAAOP,EAAmB,aAAEQ,QAAQ,GACrCP,C,KAGTQ,EAAcC,oBAAoBX,E,eFlCpCU,EAAe,CAAEE,yBATgB,WAC/BhD,EAAAG,QAAKC,WAAW6C,iBAAiB,QAAShD,GAC1CD,EAAAG,QAAKI,SAAS0C,iBAAiB,QAASvC,E,EAOCqC,oBAJf,SAAAZ,GAC1BnC,EAAAG,QAAK+C,eAAeC,WAAY,EAAAC,EAAAjD,SAAWgC,E,6BDNhCkB,EAAsB,IAAI,EAAAC,EAAAnD,S,SAMxBoD,I,OAAAA,EAAfhB,EAAAzC,EAAA,CAAAyC,EAAAiB,GAAAC,MAAA,SAAAC,I,IAIUC,EACEC,E,yEAJVd,EAAcE,2B,mBAGa,EAAAa,EAAAC,mB,OAAnBH,EAAUI,EAAAC,KACVJ,EAAaD,EAAXC,OACRP,EAAoBO,OAASA,E,gDAE7BK,EAAA9D,QAAc+D,gB,0DARYC,MAAAC,KAAAC,U,oBAAfd,EAAeY,MAAAC,KAAAC,U,EAJ9BC,GAAkBC,OAAM,SAAAC,GACtBP,EAAA9D,QAAc+D,e","sources":["src/library.js","src/js/ui/library-page-ui.js","src/js/handlers/watchedTabClickHandler.js","src/js/handlers/queueTabClickHandler.js"],"sourcesContent":["import MovieConfigs from './js/MovieConfigs';\nimport libraryPageUi from './js/ui/library-page-ui';\nimport notifications from './js/notifications';\nimport { fetchGenresList } from './js/api/movie-api/fetchGenresList';\n\nexport const libraryMovieConfigs = new MovieConfigs();\n\ninitLibraryPage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initLibraryPage() {\n  libraryPageUi.setLibraryEventListeners();\n\n  try {\n    const genresData = await fetchGenresList();\n    const { genres } = genresData;\n    libraryMovieConfigs.genres = genres;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n}\n","import refs from '../refs/refs';\nimport { watchedTabClickHandler } from '../handlers/watchedTabClickHandler';\nimport { queueTabClickHandler } from '../handlers/queueTabClickHandler';\nimport movieCards from '../../templates/movie-card.hbs';\n\nconst setLibraryEventListeners = () => {\n  refs.watchedTab.addEventListener('click', watchedTabClickHandler);\n  refs.queueTab.addEventListener('click', queueTabClickHandler);\n};\n\nconst appendGalleryMarkup = movies => {\n  refs.libraryGallery.innerHTML = movieCards(movies);\n};\n\nexport default { setLibraryEventListeners, appendGalleryMarkup };\n","import refs from '../refs/refs';\n\nexport const watchedTabClickHandler = event => {\n  refs.watchedTab.classList.add('tabs__btn--current');\n  refs.queueTab.classList.remove('tabs__btn--current');\n};\n","import refs from '../refs/refs';\nimport storage from '../local-storage/local-storage-service';\nimport key from '../local-storage/local-storage-keys';\nimport { fetchMovieById } from '../api/movie-api/fetchMovieById';\nimport { libraryMovieConfigs } from '../../library';\nimport libraryPageUi from '../ui/library-page-ui';\n\nexport const queueTabClickHandler = event => {\n  refs.queueTab.classList.add('tabs__btn--current');\n  refs.watchedTab.classList.remove('tabs__btn--current');\n  const queueMovieIds = storage.load(key.QUEUE_MOVIES);\n  console.log(queueMovieIds);\n  processMovieIds(queueMovieIds).then(data => {\n    const test = {\n      results: data,\n      total_pages: data.length / 20,\n      total_results: data.length,\n    };\n    renderLibraryMoviesData(test);\n  });\n};\n\nconst processMovieIds = ids => {\n  const movieRequests = ids.map(id => fetchMovieById(id));\n  const result = Promise.all(movieRequests);\n  return result;\n};\n\nconst renderLibraryMoviesData = data => {\n  const {\n    results: movies,\n    total_pages: totalPages,\n    total_results: totalResults,\n  } = data;\n\n  // paginationMarkup(totalPages, movieConfigs.page);\n\n  const moviesData = movies.map(item => {\n    const newItem = { ...item };\n    // newItem.genres = item['genre_ids']\n    //   .map(id => movieConfigs.getGenreById(id))\n    //   .join(', ');\n    const releaseDate = new Date(item['release_date']);\n    newItem.year = releaseDate.getFullYear();\n    newItem.vote = item['vote_average'].toFixed(1);\n    return newItem;\n  });\n\n  libraryPageUi.appendGalleryMarkup(moviesData);\n};\n"],"names":["$bpxeT","parcelRequire","$cqmI4","$b7a091296392bda0$export$1d0eac70273ba650","event","default","watchedTab","classList","add","queueTab","remove","$dDDEV","$f989e53ddbad5979$export$b893da611cba23f2","queueMovieIds","$daTbb","load","$2hVIf","QUEUE_MOVIES","console","log","$f989e53ddbad5979$var$processMovieIds","then","data","test","results","total_pages","length","total_results","$f989e53ddbad5979$var$renderLibraryMoviesData","ids","movieRequests","map","id","$bDPyF","fetchMovieById","Promise","all","movies","moviesData","item","newItem","$parcel$interopDefault","releaseDate","Date","year","getFullYear","vote","toFixed","$40377827cb75a7ee$export$2e2bcd8739ae039","appendGalleryMarkup","setLibraryEventListeners","addEventListener","libraryGallery","innerHTML","$8pYMx","$cecbdd76f2d3d4bd$export$5f907f6196637931","$l1krc","$cecbdd76f2d3d4bd$var$_initLibraryPage","$2TvXO","mark","_callee","genresData","genres","$jgL8P","fetchGenresList","_ctx","sent","$aYvV9","failedRequest","apply","this","arguments","$cecbdd76f2d3d4bd$var$initLibraryPage","catch","error"],"version":3,"file":"library.cc6964a6.js.map"}