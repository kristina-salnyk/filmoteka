{"mappings":"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","sources":["src/index.js","src/js/ui/home-page-ui.js","src/js/handlers/searchFormSubmitHandler.js","src/js/api/movie-api/fetchSearchMovie.js","src/js/render/renderMoviesData.js","src/js/handlers/homeGalleryClickHandler.js","src/js/handlers/scrollUpClickHandler.js","src/js/api/movie-api/fetchGenresList.js","src/js/api/movie-api/fetchTrendingMovies.js","src/js/footer-modal.js","src/js/loadPagePagination.js"],"sourcesContent":["import MovieConfigs from './js/MovieConfigs';\nimport homePageUi from './js/ui/home-page-ui';\nimport notifications from './js/notifications';\nimport { fetchGenresList } from './js/api/movie-api/fetchGenresList';\nimport { fetchTrendingMovies } from './js/api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './js/render/renderMoviesData';\nimport './js/footer-modal';\nimport './js/registration-modal';\nimport './js/loadPagePagination';\n\nexport const movieConfigs = new MovieConfigs();\n\ninitHomePage().catch(error => {\n  notifications.failedRequest();\n});\n\nasync function initHomePage() {\n  homePageUi.setHomeEventListeners();\n\n  try {\n    const genresData = await fetchGenresList();\n    const { genres } = genresData;\n    movieConfigs.genres = genres;\n\n    const trendingData = await fetchTrendingMovies();\n    renderMoviesData(trendingData);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n}\n","import refs from '../refs/refs';\nimport { searchFormSubmitHandler } from '../handlers/searchFormSubmitHandler';\nimport { homeGalleryClickHandler } from '../handlers/homeGalleryClickHandler';\nimport { dynamicRefs } from '../refs/dynamicRefs';\nimport { trackScroll, backToTop } from '../handlers/scrollUpClickHandler';\nimport movieCards from '../../templates/movie-card.hbs';\nimport modalMovie from '../../templates/modal-for-movie.hbs';\nimport {\n  modalWatchedBtnClickHandler,\n  modalQueueBtnClickHandler,\n  onOpenModal,\n} from '../handlers/modalBtnsClickHandler';\nimport { httpsYouTubeVideo } from '../you-tube';\n\nconst setHomeEventListeners = () => {\n  refs.searchForm.addEventListener('submit', searchFormSubmitHandler);\n  refs.homeGallery.addEventListener('click', homeGalleryClickHandler);\n\n  refs.goTopBtn.addEventListener('click', backToTop);\n  window.addEventListener('scroll', trackScroll);\n};\n\nconst appendGalleryMarkup = movies => {\n  refs.homeGallery.innerHTML = movieCards(movies);\n};\n\nconst appendMovieMarkup = movie => {\n  dynamicRefs().movieData.innerHTML = modalMovie(movie);\n\n  dynamicRefs().watchedBtn.addEventListener(\n    'click',\n    modalWatchedBtnClickHandler\n  );\n  dynamicRefs().queueBtn.addEventListener('click', modalQueueBtnClickHandler);\n  onOpenModal(movie.id);\n  dynamicRefs().playTrailer.addEventListener('click', httpsYouTubeVideo);\n};\n\nconst scrollToUp = () => {\n  window.scrollBy(0, 0);\n};\n\nexport default {\n  setHomeEventListeners,\n  appendGalleryMarkup,\n  appendMovieMarkup,\n  scrollToUp,\n};\n","import { movieConfigs } from '../../index';\nimport refs from '../refs/refs';\nimport { fetchSearchMovie } from '../api/movie-api/fetchSearchMovie';\nimport { renderMoviesData } from '../render/renderMoviesData';\n\nexport const searchFormSubmitHandler = async event => {\n  event.preventDefault();\n\n  refs.searchError.style.display = 'none';\n\n  const searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  movieConfigs.setSearchQuery(searchQuery);\n\n  try {\n    const searchData = await fetchSearchMovie();\n    renderMoviesData(searchData);\n  } catch (error) {\n    refs.searchError.style.display = 'block';\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { movieConfigs } from '../../../index';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchSearchMovie = async () => {\n  const config = {\n    params: {\n      query: movieConfigs.searchQuery,\n      page: movieConfigs.page,\n      include_adult: movieConfigs.includeAdult,\n    },\n  };\n\n  const url = REQUEST_URL.SEARCH;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'SEARCH');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import { movieConfigs } from '../../index';\nimport refs from '../refs/refs';\nimport homePageUi from '../ui/home-page-ui';\nimport paginationMarkup from '../pagination';\n\nexport const renderMoviesData = data => {\n  const {\n    results: movies,\n    total_pages: totalPages,\n    total_results: totalResults,\n  } = data;\n\n  if (totalResults === 0) {\n    refs.searchError.style.display = 'block';\n    return;\n  }\n\n  paginationMarkup(totalPages, movieConfigs.page);\n\n  const moviesData = movies.map(item => {\n    const newItem = { ...item };\n    newItem.genres = item['genre_ids']\n      .map(id => movieConfigs.getGenreById(id))\n      .join(', ');\n    const releaseDate = new Date(item['release_date']);\n    newItem.year = releaseDate.getFullYear();\n    newItem.vote = item['vote_average'].toFixed(1);\n    return newItem;\n  });\n\n  homePageUi.appendGalleryMarkup(moviesData);\n};\n","import { fetchMovieById } from '../api/movie-api/fetchMovieById';\nimport { renderOneMovieData } from '../render/renderOneMovieData';\nimport notifications from '../notifications';\nimport homePageUi from '../ui/home-page-ui';\n\nexport const homeGalleryClickHandler = async event => {\n  event.preventDefault();\n\n  const movieId = event.target.closest('a').dataset.id;\n\n  try {\n    const movieData = await fetchMovieById(movieId);\n    renderOneMovieData(movieData, homePageUi.appendMovieMarkup);\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import refs from '../refs/refs';\n\nexport const trackScroll = () => {\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    refs.goTopBtn.classList.add('back-to-top_show');\n  }\n  if (scrolled < coords) {\n    refs.goTopBtn.classList.remove('back-to-top_show');\n  }\n};\n\nexport const backToTop = () => {\n  if (window.pageYOffset > 0) {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport notifications from '../../notifications';\n\nexport const fetchGenresList = async () => {\n  const url = `${REQUEST_URL.GENRES}`;\n\n  try {\n    const response = await api.get(url);\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","import api from './api';\nimport { REQUEST_URL } from '../../constants';\nimport { movieConfigs } from '../../../index';\nimport notifications from '../../notifications';\nimport storage from '../../local-storage/local-storage-service';\nimport key from '../../local-storage/local-storage-keys';\n\nexport const fetchTrendingMovies = async () => {\n  const config = {\n    params: {\n      page: movieConfigs.page,\n    },\n  };\n\n  const url = `${REQUEST_URL.TRENDING}/${movieConfigs.mediaType}/${movieConfigs.timeWindow}`;\n\n  try {\n    const response = await api.get(url, config);\n    storage.save(key.LAST_FETCH, 'TRENDING');\n    return response.data;\n  } catch (error) {\n    notifications.failedRequest();\n  }\n};\n","(() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-footer-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-footer-modal-close]\"),\n    footerModal: document.querySelector(\"[data-modal]\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    document.body.classList.toggle(\"modal-open\");\n    refs.footerModal.classList.toggle(\"is-hidden\");\n  }\n})();","import refs from './refs/refs';\nimport { movieConfigs } from '../index';\nimport { dynamicRefs } from './refs/dynamicRefs';\nimport { fetchTrendingMovies } from './api/movie-api/fetchTrendingMovies';\nimport { renderMoviesData } from './render/renderMoviesData';\nimport { fetchSearchMovie } from './api/movie-api/fetchSearchMovie';\nimport notifications from './notifications';\nimport storege from './local-storage/local-storage-service';\nimport key from './local-storage/local-storage-keys';\n\ndynamicRefs().paginList.addEventListener('click', getNewPage);\ndynamicRefs().rightArrow.addEventListener('click', rightBtnClick);\ndynamicRefs().leftArrow.addEventListener('click', leftBtnClick);\n\nfunction leftBtnClick() {\n  movieConfigs.decrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction rightBtnClick() {\n  movieConfigs.incrementPage();\n  refs.homeGallery.innerHTML = '';\n  loadMovies();\n}\n\nfunction getNewPage(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  if (e.target.dataset.number !== '0') {\n    const page = Number(e.target.dataset.number);\n    movieConfigs.page = page;\n    refs.homeGallery.innerHTML = '';\n    loadMovies();\n  }\n}\n\nasync function loadMovies() {\n  if (storege.load(key.LAST_FETCH) === 'TRENDING') {\n    try {\n      const trendingData = await fetchTrendingMovies();\n      renderMoviesData(trendingData);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n\n  if (storege.load(key.LAST_FETCH) === 'SEARCH') {\n    try {\n      const data = await fetchSearchMovie();\n      renderMoviesData(data);\n    } catch (error) {\n      notifications.failedRequest();\n    }\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$cqmI4","$b0a69c4b7e6feacd$export$b7b604fc4e6868b3","$parcel$interopDefault","$2TvXO","mark","_callee","config","url","response","params","query","$b8f9b7833fa37166$export$c22099b47caf822","searchQuery","page","include_adult","includeAdult","$4s6iC","REQUEST_URL","SEARCH","$lu0v5","default","get","_ctx","sent","$daTbb","save","$2hVIf","LAST_FETCH","data","$aYvV9","failedRequest","$dDDEV","$39152461fc5364ef$export$f7f786f89bc6ea16","movies","results","totalPages","total_pages","total_results","$jcFG7","moviesData","map","item","newItem","genres","id","getGenreById","join","releaseDate","Date","year","getFullYear","vote","toFixed","$361ea4774fb885e6$export$2e2bcd8739ae039","appendGalleryMarkup","searchError","style","display","$1e6d4254e0978418$export$4e08842eeca88a89","event","searchData","preventDefault","currentTarget","elements","value","trim","setSearchQuery","$98f7501f110cc5dc$export$4b0a611b144735ad","movieId","movieData","target","closest","dataset","$bDPyF","fetchMovieById","$frmlX","renderOneMovieData","appendMovieMarkup","$db15f54d5b01ad1a$export$de1563ff5a1bae99","scrolled","window","pageYOffset","coords","document","documentElement","clientHeight","goTopBtn","classList","add","remove","$db15f54d5b01ad1a$export$7df07f18f1d2d847","scrollTo","top","behavior","setHomeEventListeners","searchForm","addEventListener","homeGallery","innerHTML","$8pYMx","movie","$d5Phe","dynamicRefs","$1MwiW","watchedBtn","$8gEWs","modalWatchedBtnClickHandler","queueBtn","modalQueueBtnClickHandler","onOpenModal","playTrailer","$hV87x","httpsYouTubeVideo","scrollToUp","scrollBy","$e0741441063bbb43$export$d60bdeaf43923027","concat","GENRES","$5fd230e4038851f4$export$a2840eca364d9ff2","TRENDING","mediaType","timeWindow","refs","openModalBtn","querySelector","closeModalBtn","footerModal","toggleModal","body","toggle","$98eac736ce0bc683$var$loadMovies","$98eac736ce0bc683$var$_loadMovies","apply","this","arguments","trendingData","load","paginList","e","nodeName","number","Number","rightArrow","incrementPage","leftArrow","decrementPage","$l1krc","$b8f9b7833fa37166$var$_initHomePage","genresData","$b8f9b7833fa37166$var$initHomePage","catch","error"],"version":3,"file":"index.2b27fbb7.js.map"}